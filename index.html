<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>RadyPresale | Compra Oficial</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Ethers v6 -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>

<style>
body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    color: white;
    overflow: hidden;
}

/* V√≠deo futurista de fundo */
#bgvideo {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    z-index: -2;
}

/* Overlay escuro */
.overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.65);
    z-index: -1;
}

.container {
    width: 380px;
    margin: 70px auto;
    background: rgba(0,0,0,0.65);
    border: 1px solid #00aaff;
    border-radius: 14px;
    padding: 25px;
    box-shadow: 0 0 30px #0088ff;
    backdrop-filter: blur(8px);
}

h2 {
    text-align: center;
    color: #00c8ff;
    text-shadow: 0 0 15px #00c8ff;
}

input {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    border-radius: 8px;
    border: 1px solid #00aaff;
    background: rgba(0,0,0,0.4);
    color: white;
}

button {
    width: 100%;
    padding: 14px;
    margin-top: 12px;
    border-radius: 10px;
    font-size: 16px;
    border: none;
    background: linear-gradient(90deg, #0077ff, #00d0ff);
    color: white;
    box-shadow: 0px 0px 12px #00aaff;
    cursor: pointer;
    transition: 0.3s;
}

button:hover {
    box-shadow: 0px 0px 25px #00d0ff;
}

#log {
    margin-top: 20px;
    text-align: center;
    font-size: 14px;
    min-height: 25px;
}
</style>
</head>

<body>

<!-- üé• V√≠deo futurista de fundo -->
<video autoplay muted loop id="bgvideo">
    <source src="https://cdn.coverr.co/videos/coverr-futuristic-lights-tunnel-3576/1080p.mp4" type="video/mp4">
</video>

<div class="overlay"></div>

<div class="container">
    <h2>üöÄ RadyPresale</h2>

    <button onclick="connectWallet()">üîó Conectar MetaMask</button>
    <p id="walletStatus"></p>

    <h3>Comprar token com ETH</h3>

    <input id="ethAmount" placeholder="Valor em ETH (ex: 0.01)" />
    <button onclick="buyTokens()">üü£ Comprar</button>

    <h3>Claim tokens</h3>
    <button onclick="claimTokens()">‚¨áÔ∏è Claim</button>

    <p id="log"></p>
</div>

<script>
/* ----------------------------------------------------
   Endere√ßos ocultos (pr√©-preenchidos)
---------------------------------------------------- */
const PRESALE_ADDRESS = "0xA34825C95aD8EE3552d2865A1368B8124DD30234";
const TOKEN_ADDRESS   = "0x1955405e6EdB21560889422f86365fd0C6deC998";

/* ----------------------------------------------------
   Provider & Signer
---------------------------------------------------- */
let provider, signer;

async function connectWallet() {
    try {
        if (!window.ethereum) {
            return alert("MetaMask n√£o instalada!");
        }

        await window.ethereum.request({ method: "eth_requestAccounts" });

        provider = new ethers.BrowserProvider(window.ethereum);
        signer = await provider.getSigner();

        document.getElementById("walletStatus").innerText =
            "üü¢ Conectado: " + (await signer.getAddress());

    } catch(e) {
        document.getElementById("walletStatus").innerText = "Erro: " + e.message;
    }
}

/* ----------------------------------------------------
   ABI m√≠nima para BUY e CLAIM
---------------------------------------------------- */
const presaleABI = [
    "function buyTokens() payable",
    "function claimTokens()",
];

/* ----------------------------------------------------
   BUY
---------------------------------------------------- */
async function buyTokens() {
    try {
        const amt = document.getElementById("ethAmount").value;
        if (!amt) return alert("Digite o valor em ETH");

        const contract = new ethers.Contract(PRESALE_ADDRESS, presaleABI, signer);

        const tx = await contract.buyTokens({
            value: ethers.parseEther(amt)
        });

        document.getElementById("log").innerText = "‚è≥ Processando compra...";
        await tx.wait();

        document.getElementById("log").innerText = "‚úÖ Compra confirmada!";
    } 
    catch(e) {
        document.getElementById("log").innerText = "‚ùå Erro: " + e.message;
    }
}

/* ----------------------------------------------------
   CLAIM
---------------------------------------------------- */
async function claimTokens() {
    try {
        const contract = new ethers.Contract(PRESALE_ADDRESS, presaleABI, signer);

        const tx = await contract.claimTokens();
        document.getElementById("log").innerText = "‚è≥ Processando claim...";

        await tx.wait();
        document.getElementById("log").innerText = "‚úÖ Claim realizado!";
    }
    catch(e) {
        document.getElementById("log").innerText = "‚ùå Erro: " + e.message;
    }
}
</script>

</body>
</html>
